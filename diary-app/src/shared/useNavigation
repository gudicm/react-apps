import { useState, useEffect } from 'react';

const useNavigation = (max, back) => {
    const [index, setIndex] = useState(0);

    useEffect(() => {
        window.pageCount = max;
        const pathIndex = parseInt(window.location.pathname.split('/').at(-1));
        if (pathIndex <= max) {
            navigateTo(pathIndex);
        }
    }, [max]);

    const forward = () => {
        if (index == max) {
            return;
        } else {
            setIndex(index + 1);
        }
    };

    const backward = () => {
        if (index > 0) {
            setIndex(index - 1);
        } else if (back) {
            back();
        }
    };

    const navigateTo = target => {
        setIndex(target);
    };

    return { index, forward, backward, navigateTo };
};
export default useNavigation;
